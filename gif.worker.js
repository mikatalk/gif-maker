!function(t){function e(r){if(i[r])return i[r].exports;var s=i[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var i={};e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,r){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="https://mikatalk.github.io/gif-maker/",e(e.s="i5Ab")}({i5Ab:function(t,e,i){var r,r;!function t(e,i,s){function n(a,h){if(!i[a]){if(!e[a]){var l="function"==typeof r&&r;if(!h&&l)return r(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var p=i[a]={exports:{}};e[a][0].call(p.exports,function(t){var i=e[a][1][t];return n(i||t)},p,p.exports,t,e,i,s)}return i[a].exports}for(var o="function"==typeof r&&r,a=0;a<s.length;a++)n(s[a]);return n}({1:[function(t,e,i){function r(){this.page=-1,this.pages=[],this.newPage()}function s(t,e){this.width=~~t,this.height=~~e,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new r}var n=t("./TypedNeuQuant.js"),o=t("./LZWEncoder.js");r.pageSize=4096,r.charMap={};for(var a=0;a<256;a++)r.charMap[a]=String.fromCharCode(a);r.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(r.pageSize),this.cursor=0},r.prototype.getData=function(){for(var t="",e=0;e<this.pages.length;e++)for(var i=0;i<r.pageSize;i++)t+=r.charMap[this.pages[e][i]];return t},r.prototype.writeByte=function(t){this.cursor>=r.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=t},r.prototype.writeUTFBytes=function(t){for(var e=t.length,i=0;i<e;i++)this.writeByte(t.charCodeAt(i))},r.prototype.writeBytes=function(t,e,i){for(var r=i||t.length,s=e||0;s<r;s++)this.writeByte(t[s])},s.prototype.setDelay=function(t){this.delay=Math.round(t/10)},s.prototype.setFrameRate=function(t){this.delay=Math.round(100/t)},s.prototype.setDispose=function(t){t>=0&&(this.dispose=t)},s.prototype.setRepeat=function(t){this.repeat=t},s.prototype.setTransparent=function(t){this.transparent=t},s.prototype.addFrame=function(t){this.image=t,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),!0===this.globalPalette&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.globalPalette||this.writePalette(),this.writePixels(),this.firstFrame=!1},s.prototype.finish=function(){this.out.writeByte(59)},s.prototype.setQuality=function(t){t<1&&(t=1),this.sample=t},s.prototype.setDither=function(t){!0===t&&(t="FloydSteinberg"),this.dither=t},s.prototype.setGlobalPalette=function(t){this.globalPalette=t},s.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette},s.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")},s.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new n(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),null!==this.dither.match(/-serpentine/)):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent,!0))},s.prototype.indexPixels=function(t){var e=this.pixels.length/3;this.indexedPixels=new Uint8Array(e);for(var i=0,r=0;r<e;r++){var s=this.findClosestRGB(255&this.pixels[i++],255&this.pixels[i++],255&this.pixels[i++]);this.usedEntry[s]=!0,this.indexedPixels[r]=s}},s.prototype.ditherPixels=function(t,e){var i={FalseFloydSteinberg:[[3/8,1,0],[3/8,0,1],[.25,1,1]],FloydSteinberg:[[7/16,1,0],[3/16,-1,1],[5/16,0,1],[1/16,1,1]],Stucki:[[8/42,1,0],[4/42,2,0],[2/42,-2,1],[4/42,-1,1],[8/42,0,1],[4/42,1,1],[2/42,2,1],[1/42,-2,2],[2/42,-1,2],[4/42,0,2],[2/42,1,2],[1/42,2,2]],Atkinson:[[1/8,1,0],[1/8,2,0],[1/8,-1,1],[1/8,0,1],[1/8,1,1],[1/8,0,2]]};if(!t||!i[t])throw"Unknown dithering kernel: "+t;var r=i[t],s=0,n=this.height,o=this.width,a=this.pixels,h=e?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var l=0;l<n;l++){e&&(h*=-1);for(var u=1==h?0:o-1,p=1==h?o:0;u!==p;u+=h){s=l*o+u;var f=3*s,c=a[f],y=a[f+1],w=a[f+2];f=this.findClosestRGB(c,y,w),this.usedEntry[f]=!0,this.indexedPixels[s]=f,f*=3;for(var d=this.colorTab[f],g=this.colorTab[f+1],x=this.colorTab[f+2],b=c-d,v=y-g,P=w-x,m=1==h?0:r.length-1,B=1==h?r.length:0;m!==B;m+=h){var S=r[m][1],T=r[m][2];if(S+u>=0&&S+u<o&&T+l>=0&&T+l<n){var F=r[m][0];f=s+S+T*o,f*=3,a[f]=Math.max(0,Math.min(255,a[f]+b*F)),a[f+1]=Math.max(0,Math.min(255,a[f+1]+v*F)),a[f+2]=Math.max(0,Math.min(255,a[f+2]+P*F))}}}}},s.prototype.findClosest=function(t,e){return this.findClosestRGB((16711680&t)>>16,(65280&t)>>8,255&t,e)},s.prototype.findClosestRGB=function(t,e,i,r){if(null===this.colorTab)return-1;if(this.neuQuant&&!r)return this.neuQuant.lookupRGB(t,e,i);for(var s=0,n=16777216,o=this.colorTab.length,a=0,h=0;a<o;h++){var l=t-(255&this.colorTab[a++]),u=e-(255&this.colorTab[a++]),p=i-(255&this.colorTab[a++]),f=l*l+u*u+p*p;(!r||this.usedEntry[h])&&f<n&&(n=f,s=h)}return s},s.prototype.getImagePixels=function(){var t=this.width,e=this.height;this.pixels=new Uint8Array(t*e*3);for(var i=this.image,r=0,s=0,n=0;n<e;n++)for(var o=0;o<t;o++)this.pixels[s++]=i[r++],this.pixels[s++]=i[r++],this.pixels[s++]=i[r++],r++},s.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var t,e;null===this.transparent?(t=0,e=0):(t=1,e=2),this.dispose>=0&&(e=7&dispose),e<<=2,this.out.writeByte(0|e|t),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},s.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},s.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},s.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},s.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var t=768-this.colorTab.length,e=0;e<t;e++)this.out.writeByte(0)},s.prototype.writeShort=function(t){this.out.writeByte(255&t),this.out.writeByte(t>>8&255)},s.prototype.writePixels=function(){new o(this.width,this.height,this.indexedPixels,this.colorDepth).encode(this.out)},s.prototype.stream=function(){return this.out},e.exports=s},{"./LZWEncoder.js":2,"./TypedNeuQuant.js":3}],2:[function(t,e,i){function r(t,e,i,r){function h(t,e){S[x++]=t,x>=254&&c(e)}function l(t){u(o),A=P+2,C=!0,d(P,t)}function u(t){for(var e=0;e<t;++e)T[e]=-1}function p(t,e){var i,r,a,h,p,f,c;for(v=t,C=!1,n_bits=v,b=y(n_bits),P=1<<t-1,m=P+1,A=P+2,x=0,h=w(),c=0,i=o;i<65536;i*=2)++c;c=8-c,f=o,u(f),d(P,e);t:for(;(r=w())!=s;)if(i=(r<<n)+h,a=r<<c^h,T[a]!==i){if(T[a]>=0){p=f-a,0===a&&(p=1);do{if((a-=p)<0&&(a+=f),T[a]===i){h=F[a];continue t}}while(T[a]>=0)}d(h,e),h=r,A<1<<n?(F[a]=A++,T[a]=i):l(e)}else h=F[a];d(h,e),d(m,e)}function f(i){i.writeByte(B),remaining=t*e,curPixel=0,p(B+1,i),i.writeByte(0)}function c(t){x>0&&(t.writeByte(x),t.writeBytes(S,0,x),x=0)}function y(t){return(1<<t)-1}function w(){return 0===remaining?s:(--remaining,255&i[curPixel++])}function d(t,e){for(g&=a[M],M>0?g|=t<<M:g=t,M+=n_bits;M>=8;)h(255&g,e),g>>=8,M-=8;if((A>b||C)&&(C?(b=y(n_bits=v),C=!1):(++n_bits,b=n_bits==n?1<<n:y(n_bits))),t==m){for(;M>0;)h(255&g,e),g>>=8,M-=8;c(e)}}var g,x,b,v,P,m,B=Math.max(2,r),S=new Uint8Array(256),T=new Int32Array(o),F=new Int32Array(o),M=0,A=0,C=!1;this.encode=f}var s=-1,n=12,o=5003,a=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];e.exports=r},{}],3:[function(t,e,i){function r(t,e){function i(){G=[],z=new Int32Array(256),U=new Int32Array(n),_=new Int32Array(n),Q=new Int32Array(n>>3);var t,e;for(t=0;t<n;t++)e=(t<<a+8)/n,G[t]=new Float64Array([e,e,e,0]),_[t]=l/n,U[t]=0}function r(){for(var t=0;t<n;t++)G[t][0]>>=a,G[t][1]>>=a,G[t][2]>>=a,G[t][3]=t}function y(t,e,i,r,s){G[e][0]-=t*(G[e][0]-i)/b,G[e][1]-=t*(G[e][1]-r)/b,G[e][2]-=t*(G[e][2]-s)/b}function d(t,e,i,r,s){for(var o,a,h=Math.abs(e-t),l=Math.min(e+t,n),u=e+1,p=e-1,f=1;u<l||p>h;)a=Q[f++],u<l&&(o=G[u++],o[0]-=a*(o[0]-i)/P,o[1]-=a*(o[1]-r)/P,o[2]-=a*(o[2]-s)/P),p>h&&(o=G[p--],o[0]-=a*(o[0]-i)/P,o[1]-=a*(o[1]-r)/P,o[2]-=a*(o[2]-s)/P)}function M(t,e,i){var r,s,o,l,y,w=~(1<<31),d=w,g=-1,x=g;for(r=0;r<n;r++)s=G[r],o=Math.abs(s[0]-t)+Math.abs(s[1]-e)+Math.abs(s[2]-i),o<w&&(w=o,g=r),l=o-(U[r]>>h-a),l<d&&(d=l,x=r),y=_[r]>>p,_[r]-=y,U[r]+=y<<u;return _[g]+=f,U[g]-=c,x}function A(){var t,e,i,r,s,a,h=0,l=0;for(t=0;t<n;t++){for(i=G[t],s=t,a=i[1],e=t+1;e<n;e++)r=G[e],r[1]<a&&(s=e,a=r[1]);if(r=G[s],t!=s&&(e=r[0],r[0]=i[0],i[0]=e,e=r[1],r[1]=i[1],i[1]=e,e=r[2],r[2]=i[2],i[2]=e,e=r[3],r[3]=i[3],i[3]=e),a!=h){for(z[h]=l+t>>1,e=h+1;e<a;e++)z[e]=t;h=a,l=t}}for(z[h]=l+o>>1,e=h+1;e<256;e++)z[e]=o}function C(t,e,i){for(var r,s,o,a=1e3,h=-1,l=z[e],u=l-1;l<n||u>=0;)l<n&&(s=G[l],o=s[1]-e,o>=a?l=n:(l++,o<0&&(o=-o),r=s[0]-t,r<0&&(r=-r),(o+=r)<a&&(r=s[2]-i,r<0&&(r=-r),(o+=r)<a&&(a=o,h=s[3])))),u>=0&&(s=G[u],o=e-s[1],o>=a?u=-1:(u--,o<0&&(o=-o),r=s[0]-t,r<0&&(r=-r),(o+=r)<a&&(r=s[2]-i,r<0&&(r=-r),(o+=r)<a&&(a=o,h=s[3]))));return h}function E(){var i,r=t.length,n=30+(e-1)/3,o=r/(3*e),h=~~(o/s),l=b,u=g,p=u>>w;for(p<=1&&(p=0),i=0;i<p;i++)Q[i]=l*((p*p-i*i)*v/(p*p));var f;r<F?(e=1,f=3):f=r%m!=0?3*m:r%B!=0?3*B:r%S!=0?3*S:3*T;var c,P,A,C,E=0;for(i=0;i<o;)if(c=(255&t[E])<<a,P=(255&t[E+1])<<a,A=(255&t[E+2])<<a,C=M(c,P,A),y(l,C,c,P,A),0!==p&&d(p,C,c,P,A),E+=f,E>=r&&(E-=r),i++,0===h&&(h=1),i%h==0)for(l-=l/n,u-=u/x,p=u>>w,p<=1&&(p=0),C=0;C<p;C++)Q[C]=l*((p*p-C*C)*v/(p*p))}function I(){i(),E(),r(),A()}function D(){for(var t=[],e=[],i=0;i<n;i++)e[G[i][3]]=i;for(var r=0,s=0;s<n;s++){var o=e[s];t[r++]=G[o][0],t[r++]=G[o][1],t[r++]=G[o][2]}return t}var G,z,U,_,Q;this.buildColormap=I,this.getColormap=D,this.lookupRGB=C}var s=100,n=256,o=n-1,a=4,h=16,l=1<<h,u=10,p=10,f=l>>p,c=l<<u-p,y=n>>3,w=6,d=1<<w,g=y*d,x=30,b=1024,v=256,P=1<<18,m=499,B=491,S=487,T=503,F=3*T;e.exports=r},{}],4:[function(t,e,i){var r,s;r=t("./GIFEncoder.js"),s=function(t){var e,i,s,n;return e=new r(t.width,t.height),0===t.index?e.writeHeader():e.firstFrame=!1,e.setTransparent(t.transparent),e.setRepeat(t.repeat),e.setDelay(t.delay),e.setQuality(t.quality),e.setDither(t.dither),e.setGlobalPalette(t.globalPalette),e.addFrame(t.data),t.last&&e.finish(),!0===t.globalPalette&&(t.globalPalette=e.getGlobalPalette()),s=e.stream(),t.data=s.pages,t.cursor=s.cursor,t.pageSize=s.constructor.pageSize,t.canTransfer?(n=function(){var e,r,s,n;for(s=t.data,n=[],e=0,r=s.length;e<r;e++)i=s[e],n.push(i.buffer);return n}(),self.postMessage(t,n)):self.postMessage(t)},self.onmessage=function(t){return s(t.data)}},{"./GIFEncoder.js":1}]},{},[4])}});
//# sourceMappingURL=gif.worker.js.map